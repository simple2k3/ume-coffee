{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <title>Giỏ hàng - Ume Coffee</title>
  <!-- Favicons -->
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: url("{% static 'assets/img/background.jpg' %}") no-repeat center center fixed;
      background-size: cover;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(4px);
      z-index: -1;
    }

    h2 {
      color: #4A2C2A;
      font-weight: 600;
    }

    .cart-container {
      background-color: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .cart-table th {
      background-color: #4A2C2A;
      color: #fff;
      text-align: center;
      vertical-align: middle;
    }

    .cart-table td {
      vertical-align: middle;
      text-align: center;
    }

    .cart-image {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 10px;
    }

    .cart-empty {
      text-align: center;
      padding: 60px 0;
    }

    .cart-empty i {
      font-size: 4rem;
      color: #b0a28b;
    }

    .cart-empty p {
      color: #6c757d;
      margin-top: 15px;
    }

    .btn-checkout, .btn-clear, .btn-continue {
      border-radius: 25px;
      padding: 10px 25px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-checkout {
      background-color: #4A2C2A;
      color: #fff;
    }

    .btn-checkout:hover {
      background-color: #3D2420;
    }

    .btn-clear {
      background-color: #dc3545;
      color: #fff;
    }

    .btn-clear:hover {
      background-color: #b02a37;
    }

    .btn-continue {
      background-color: #6B4E31;
      color: #fff;
    }

    .btn-continue:hover {
      background-color: #523b26;
    }

    .total-section {
      text-align: right;
      margin-top: 20px;
    }

    .total-section h4 {
      color: #4A2C2A;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <main class="main py-5">
    <div class="container" data-aos="fade-up">
      <div class="cart-container">
        <div class="text-center mb-4">
          <h2><i class="bi bi-cart3 me-2"></i>Giỏ hàng của bạn</h2>
        </div>
        {% if cart %}
        <div class="table-responsive">
          <table class="table cart-table align-middle">
            <thead>
              <tr>
                <th>Hình ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
              </tr>
            </thead>
            <tbody>
              {% for id, item in cart.items %}
              <tr>
                <td>
                  {% if item.image %}
                    <img src="{{ item.image }}" alt="{{ item.name }}" class="cart-image">
                  {% else %}
                    <img src="{% static 'assets/img/default.jpg' %}" class="cart-image" alt="No image">
                  {% endif %}
                </td>
                <td>{{ item.name }}</td>
                <td>{{ item.price|floatformat:0 }}₫</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.price|floatformat:0|add:item.quantity }}₫</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="total-section">
          <h4>Tổng cộng: <strong>{{ total|floatformat:0 }}₫</strong></h4>
          <div class="mt-3">
            <a href="{% url 'clear_cart' %}" class="btn btn-clear me-2">
              <i class="bi bi-trash3"></i> Xóa giỏ hàng
            </a>
            <a href="#" class="btn btn-checkout">
              <i class="bi bi-credit-card"></i> Thanh toán
            </a>
          </div>
        </div>

        {% else %}
        <div class="cart-empty">
          <i class="bi bi-cart-x"></i>
          <p>Giỏ hàng của bạn đang trống.</p>
          <a href="{% url 'portfolio' %}" class="btn btn-continue mt-3">
            <i class="bi bi-arrow-left"></i> Tiếp tục mua sắm
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </main>
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- JS -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>
</body>
</html>
{% endblock %}