{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}UME Coffee{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" href="{% static 'assets/img/favicon.png' %}">
  <link rel="apple-touch-icon" href="{% static 'assets/img/apple-touch-icon.png' %}">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link rel="stylesheet" href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}">
  <link rel="stylesheet" href="{% static 'assets/vendor/aos/aos.css' %}">
  <link rel="stylesheet" href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}">

  <!-- Main CSS -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">

  <style>
    /* Tổng thể */
    body {
      margin: 0;
      padding: 0;
      background: #fff;
    }

    /* Header trong suốt, không viền trắng */
    #header.header {
        background: #fff;
      border: none;
      box-shadow: none;
    }

    /* Bố cục header */
    #header .container-xl {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* Menu chính */
    .navmenu ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 20px;
    }

    .navmenu li {
      position: relative;
    }

    /* Dropdown */
    .navmenu ul ul {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      flex-direction: column;
      min-width: 200px;
      z-index: 1000;
      border-radius: 4px;
    }

    .navmenu ul ul {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background: #fff;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  flex-direction: column;
  min-width: 200px;
  z-index: 1000;
  border-radius: 4px;
  width: max-content; /* tự điều chỉnh theo nội dung */
}

.navmenu ul ul li {
  width: 100%; /* mỗi <li> chiếm toàn bộ width của <ul> */
}

.navmenu ul ul li a {
  display: block;   /* để padding áp dụng đúng */
  width: 100%;      /* đồng đều */
  padding: 10px 15px;
  color: #333;
  text-decoration: none;
}

.navmenu ul ul li a:hover {
  background-color: #f8f9fa;
  color: #000;
}

.navmenu ul li:hover > ul {
  display: flex;
  flex-direction: column;
}

    /* Biểu tượng giỏ hàng và chuông */
    .header-cart, .header-bell {
      position: relative;
      display: flex;
      align-items: center;
    }

    .cart-icon, .bell-icon {
      display: inline-block;
      padding: 8px;
      border-radius: 50%;
      transition: background-color 0.3s;
    }

    .cart-icon:hover, .bell-icon:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .cart-badge {
      font-size: 0.7rem;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Responsive menu */
    @media (max-width: 992px) {
  #header .container-xl {
    flex-wrap: nowrap;
    justify-content: space-between;
  }

  .logo img {
    height: 35px; /* thu nhỏ logo */
  }

  .sitename {
    font-size: 18px; /* giảm kích thước chữ */
    white-space: nowrap;
  }

  .logo {
    display: flex;
    align-items: center;
  }

  .mobile-nav-toggle {
    font-size: 26px;
  }
}

/* Nhỏ hơn 576px (điện thoại) */
@media (max-width: 576px) {
  .logo img {
    height: 30px;
  }

  .sitename {
    font-size: 16px;
  }
}    /* Responsive menu */
    @media (max-width: 992px) {
  #header .container-xl {
    flex-wrap: nowrap;
    justify-content: space-between;
  }

  .logo img {
    height: 35px; /* thu nhỏ logo */
  }

  .sitename {
    font-size: 18px; /* giảm kích thước chữ */
    white-space: nowrap;
  }

  .logo {
    display: flex;
    align-items: center;
  }

  .mobile-nav-toggle {
    font-size: 26px;
  }
}

/* Nhỏ hơn 576px (điện thoại) */
@media (max-width: 576px) {
  .logo img {
    height: 30px;
  }

  .sitename {
    font-size: 16px;
  }
}

@media (max-width: 390px) {
  .navmenu a {
    font-size: 14px;
  }

  .mobile-nav-toggle {
    font-size: 24px;
  }

  #header.header {
    padding: 6px 10px;
  }
}
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body>

<!-- ======= Header ======= -->
<header id="header" class="header sticky-top">
  <div class="container-xl">

    <!-- Logo -->
    <a href="{% url 'index_html' %}" class="logo d-flex align-items-center me-4">
      <img src="{% static 'assets/img/logo.jpg' %}" alt="UME Coffee">
      <h1 class="sitename ms-2">UME COFFEE</h1>
    </a>

    <!-- Menu chính -->
    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="{% url 'index_html' %}" class="{% if request.path == '/' %}active{% endif %}">Trang Chủ</a></li>
        <li><a href="{% url 'portfolio' %}" class="{% if request.path == '/portfolio/' %}active{% endif %}">Danh mục</a></li>
        <li class="dropdown">
          <a href="#"><span>Các Loại Cà Phê</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            {% for category in categories_data %}
              <li><a href="{% url 'category_products' category.categories_id %}">{{ category.categories_name }}</a></li>
            {% endfor %}
          </ul>
        </li>
        <li><a href="{% url 'contact' %}" class="{% if request.path == '/contact/' %}active{% endif %}">Liên Hệ</a></li>
      </ul>
      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>

    <!-- Biểu tượng bên phải -->
    <div class="d-flex align-items-center">
      <!-- Giỏ hàng -->
      <div class="header-cart position-relative me-3">
        <a href="{% url 'cart' %}" class="cart-icon text-dark position-relative">
          <i class="bi bi-cart fs-4"></i>
          {% with request.session.cart|length as cart_count %}
            {% if cart_count > 0 %}
              <span class="cart-badge position-absolute top-0 start-100 translate-middle rounded-circle bg-danger text-white">
                {{ cart_count }}
              </span>
            {% endif %}
          {% endwith %}
        </a>
      </div>

      <!-- Chuông thông báo -->
      <div class="header-bell position-relative me-3">
        <a href="#" class="bell-icon text-dark position-relative">
          <i class="bi bi-bell fs-4"></i>
          <span class="cart-badge position-absolute top-0 start-100 translate-middle rounded-circle bg-warning text-dark fw-bold">3</span>
        </a>
      </div>

      <!-- Mạng xã hội -->
<!--      <div class="header-social-links d-flex">-->
<!--        <a href="#"><i class="bi bi-twitter-x"></i></a>-->
<!--        <a href="#"><i class="bi bi-facebook"></i></a>-->
<!--        <a href="#"><i class="bi bi-instagram"></i></a>-->
<!--        <a href="#"><i class="bi bi-linkedin"></i></a>-->
<!--      </div>-->
    </div>

  </div>
</header>
<!-- End Header -->

<!-- Messages -->
{% if messages %}
  <div class="container mt-3" id="message-container">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% block content %}{% endblock %}

<!-- ======= Footer ======= -->
<footer id="footer" class="footer text-center">
  <div class="container">
    <p>© <strong class="sitename">UME Coffee</strong> — Cao nguyên Vân Hòa, Đắk Lắk</p>
    <div class="social-links d-flex justify-content-center">
      <a href="#"><i class="bi bi-twitter-x"></i></a>
      <a href="#"><i class="bi bi-facebook"></i></a>
      <a href="#"><i class="bi bi-instagram"></i></a>
      <a href="#"><i class="bi bi-linkedin"></i></a>
    </div>
  </div>
</footer>
<!-- End Footer -->

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

<!-- Vendor JS -->
<script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
<script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
<script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>

<!-- Main JS -->
<script src="{% static 'assets/js/main.js' %}"></script>

<script>
  // Tự ẩn thông báo sau 2 giây
  setTimeout(() => {
    const msgContainer = document.getElementById('message-container');
    if (msgContainer) {
      msgContainer.style.transition = "opacity 0.5s";
      msgContainer.style.opacity = 0;
      setTimeout(() => msgContainer.remove(), 500);
    }
  }, 2000);

  // Toggle menu mobile
  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.querySelector('.mobile-nav-toggle');
    const navMenu = document.querySelector('#navmenu ul');

    toggle.addEventListener('click', function() {
      navMenu.classList.toggle('show');
      this.classList.toggle('bi-x');
    });
  });
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
